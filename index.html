<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hiragana ‚Üî Romaji Quiz</title>
<style>
  body {
    font-family: "Hiragino Kaku Gothic Pro", "Meiryo", sans-serif;
    background-color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px;
    color: #333;
    text-align: center;
  }

  h1 {
    color: #b23b3b;
    font-size: 2em;
    margin-bottom: 20px;
  }

  #quiz-container {
    background-color: white;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    padding: 30px;
    width: 90%;
    max-width: 500px;
    text-align: center;
  }

  .question {
    font-size: 3em;
    margin-bottom: 25px;
  }

  .option {
    display: block;
    background-color: #ffeaea;
    border: none;
    border-radius: 10px;
    padding: 12px;
    font-size: 1.3em;
    width: 100%;
    max-width: 300px;
    margin: 10px auto;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .option:hover {
    background-color: #f7b6b6;
  }

  #message {
    margin-top: 20px;
    font-weight: bold;
    font-size: 1.2em;
  }

  #next {
    display: none;
    margin-top: 25px;
    background-color: #b23b3b;
    color: white;
    border: none;
    border-radius: 10px;
    padding: 10px 20px;
    font-size: 1.1em;
    cursor: pointer;
  }

  #next:hover {
    background-color: #a03030;
  }
</style>
</head>
<body>
  
<h1>Hiragana ‚Üî Romaji Quiz</h1>

<div id="quiz-container">
  <div id="question-number"></div>
  <div class="question" id="question"></div>
  <div id="options"></div>
  <div id="message"></div>
  <button id="next">Next</button>
</div>

<script>
const baseQuestions = [
  {h: "„ÅÇ", r: "a"}, {h: "„ÅÑ", r: "i"}, {h: "„ÅÜ", r: "u"}, {h: "„Åà", r: "e"}, {h: "„Åä", r: "o"},
  {h: "„Åã", r: "ka"}, {h: "„Åç", r: "ki"}, {h: "„Åè", r: "ku"}, {h: "„Åë", r: "ke"}, {h: "„Åì", r: "ko"},
  {h: "„Åå", r: "ga"}, {h: "„Åé", r: "gi"}, {h: "„Åê", r: "gu"}, {h: "„Åí", r: "ge"}, {h: "„Åî", r: "go"},
  {h: "„Åï", r: "sa"}, {h: "„Åó", r: "shi"}, {h: "„Åô", r: "su"}, {h: "„Åõ", r: "se"}, {h: "„Åù", r: "so"},
  {h: "„Åñ", r: "za"}, {h: "„Åò", r: "ji"}, {h: "„Åö", r: "zu"}, {h: "„Åú", r: "ze"}, {h: "„Åû", r: "zo"}
];

// create 50-question pool with random mix of both directions
let questionPool = [];
for (let i = 0; i < 50; i++) {
  const item = baseQuestions[Math.floor(Math.random() * baseQuestions.length)];
  const direction = Math.random() < 0.5 ? "toRomaji" : "toHiragana";
  questionPool.push({ ...item, direction });
}

let current = 0;
let score = 0;

const questionEl = document.getElementById("question");
const optionsEl = document.getElementById("options");
const messageEl = document.getElementById("message");
const nextBtn = document.getElementById("next");
const qNumEl = document.getElementById("question-number");

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

function showQuestion() {
  messageEl.textContent = "";
  nextBtn.style.display = "none";

  const q = questionPool[current];
  qNumEl.textContent = `Question ${current + 1} / ${questionPool.length}`;
  optionsEl.innerHTML = "";

  let correctAnswer, displayValue, allOptions;

  if (q.direction === "toRomaji") {
    // Hiragana ‚Üí Romaji
    displayValue = q.h;
    correctAnswer = q.r;
    allOptions = baseQuestions.map(x => x.r);
  } else {
    // Romaji ‚Üí Hiragana
    displayValue = q.r;
    correctAnswer = q.h;
    allOptions = baseQuestions.map(x => x.h);
  }

  questionEl.textContent = displayValue;

  // make option set of 1 correct + 3 wrong
  const wrongOpts = shuffle(allOptions.filter(opt => opt !== correctAnswer)).slice(0, 3);
  const options = shuffle([correctAnswer, ...wrongOpts]);

  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.classList.add("option");
    btn.onclick = () => checkAnswer(opt, correctAnswer);
    optionsEl.appendChild(btn);
  });
}

function checkAnswer(selected, correct) {
  document.querySelectorAll(".option").forEach(b => b.disabled = true);

  if (selected === correct) {
    messageEl.textContent = "‚úÖ Correct!";
    messageEl.style.color = "#228b22";
    score++;
  } else {
    messageEl.textContent = `‚ùå Wrong! Correct: ${correct}`;
    messageEl.style.color = "#b23b3b";
  }

  nextBtn.style.display = "block";
}

nextBtn.onclick = () => {
  current++;
  if (current < questionPool.length) {
    showQuestion();
  } else {
    showResults();
  }
};

function showResults() {
  questionEl.textContent = "üéâ Finished!";
  optionsEl.innerHTML = "";
  messageEl.innerHTML = `You got <b>${score}</b> out of <b>${questionPool.length}</b> correct.`;
  nextBtn.style.display = "none";
}

showQuestion();
</script>

</body>
</html>
